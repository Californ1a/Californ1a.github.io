
<!DOCTYPE html>
<html>
<head>
	<title>Distathon 2 Donation Tracker</title>
	<link rel="stylesheet" type="text/css" href="assets/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="assets/css/style.css">
	<script src="assets/js/jquery.min.js"></script>
	<script src="assets/js/bootstrap.min.js"></script>
	<script src="assets/js/jquery.animateNumber.min.js"></script>
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,600,700' rel='stylesheet' type='text/css'>
</head>
<body>
	<div class="container">
      <div class="header">
        <h3 class="text-muted">Distathon 2 Donation Tracker</h3>
      </div>

      <div class="jumbotron">
        <h1>$<span id="donation-total">0</span></h1>
        <p class="lead">raised for Child's Play charity. (<span id="contributions">0</span> donations)</p>
        <p><a class="btn btn-lg btn-success" href="https://donate.childsplaycharity.org/eff5e9ca13c95ce285babe5f60355d21/" role="button">Donate</a></p>
      </div>
</div>
<script type="text/javascript">
	$(document).ready(function() {
		
		function updateAmount() {
			$.ajax({
	                type: "GET",
	                url: "https://donate.childsplaycharity.org/api/event/eff5e9ca13c95ce285babe5f60355d21/json",
	                success: function (data) {
	                	var cs = $.animateNumber.numberStepFactories.separator(',');

	                	$("#donation-total").animateNumber(
							{
							number: data.total,
							numberStep: cs
							}
						);

						$("#contributions").animateNumber(
							{
							number: data.contributions,
							numberStep: cs
							}
						);

          $("#recent-container").load("http://donate.technicpack.net/recent");
	      
        }
	    });

			setTimeout(updateAmount, 60000);
		}

		updateAmount();

    $("#check-user").submit(function(e) {
      e.preventDefault();
      $(".alert").hide();

      if ($("#username").val() == "") {
        $(".alert-danger").html("You must enter an in-game name!").fadeIn();
      } else {
        $.ajax({
                  type: "POST",
                  url: $(this).attr('action'),
                  data: $(this).serialize(),
                  success: function (data) {
                    if (data.success) {
                      $(".alert-success").html(data.reason).fadeIn();
                    } else {
                      $(".alert-danger").html(data.reason).fadeIn();
                    }
                  }
          });
      }
    });
});
</script>
</body>
</html>